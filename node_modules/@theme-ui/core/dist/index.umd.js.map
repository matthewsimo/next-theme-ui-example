{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  jsx as emotion,\n  ThemeContext as EmotionContext,\n  InterpolationWithTheme,\n} from '@emotion/core'\n// @ts-ignore\nimport { css, Theme } from '@theme-ui/css'\nimport React from 'react'\nimport deepmerge from 'deepmerge'\nimport { version as __EMOTION_VERSION__ } from '@emotion/core/package.json'\n\nimport './react-jsx'\n\nexport * from './types'\n\nconst getCSS = (props) => {\n  if (!props.sx && !props.css) return undefined\n  return (theme) => {\n    const styles = css(props.sx)(theme)\n    const raw = typeof props.css === 'function' ? props.css(theme) : props.css\n    return [styles, raw]\n  }\n}\n\nconst parseProps = (props) => {\n  if (!props) return null\n  const next: typeof props & { css?: InterpolationWithTheme<any> } = {}\n  for (let key in props) {\n    if (key === 'sx') continue\n    next[key] = props[key]\n  }\n  const css = getCSS(props)\n  if (css) next.css = css\n  return next\n}\n\nexport const jsx: typeof React.createElement = (type, props, ...children) =>\n  emotion.apply(undefined, [type, parseProps(props), ...children])\n\nexport interface ContextValue {\n  __EMOTION_VERSION__: string\n  theme: Theme\n  colorMode?: string\n  setColorMode?: () => void\n}\nexport const Context = React.createContext<ContextValue>({\n  __EMOTION_VERSION__,\n  theme: {},\n})\n\nexport const useThemeUI = () => React.useContext(Context)\n\nconst canUseSymbol = typeof Symbol === 'function' && Symbol.for\n\nconst REACT_ELEMENT = canUseSymbol ? Symbol.for('react.element') : 0xeac7\nconst FORWARD_REF = canUseSymbol ? Symbol.for('react.forward_ref') : 0xeac7\n\nconst isMergeableObject = (n) => {\n  return (\n    !!n &&\n    typeof n === 'object' &&\n    n.$$typeof !== REACT_ELEMENT &&\n    n.$$typeof !== FORWARD_REF\n  )\n}\n\nconst arrayMerge = (destinationArray, sourceArray, options) => sourceArray\n\n/**\n * Deeply merge themes\n */\nexport const merge = (a: Theme, b: Theme): Theme =>\n  deepmerge(a, b, { isMergeableObject, arrayMerge })\n\nmerge.all = <T = Theme>(...args: Partial<T>[]) =>\n  deepmerge.all<T>(args, { isMergeableObject, arrayMerge })\n\ninterface BaseProviderProps {\n  context: ContextValue\n}\nconst BaseProvider: React.FC<BaseProviderProps> = ({ context, children }) =>\n  jsx(\n    EmotionContext.Provider,\n    { value: context.theme },\n    jsx(Context.Provider, {\n      value: context,\n      children,\n    })\n  )\n\nexport interface ThemeProviderProps {\n  theme: Theme | ((outerTheme: Theme) => Theme)\n  children?: React.ReactNode\n}\n\nexport function ThemeProvider({ theme, children }: ThemeProviderProps) {\n  const outer = useThemeUI()\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (outer.__EMOTION_VERSION__ !== __EMOTION_VERSION__) {\n      console.warn(\n        'Multiple versions of Emotion detected,',\n        'and theming might not work as expected.',\n        'Please ensure there is only one copy of @emotion/core installed in your application.'\n      )\n    }\n  }\n\n  const context =\n    typeof theme === 'function'\n      ? { ...outer, theme: theme(outer.theme) }\n      : merge.all<ContextValue>({}, outer, { theme })\n\n  return jsx(BaseProvider, { context }, children)\n}\n"],"names":["const","getCSS","props","sx","css","undefined","theme","styles","raw","parseProps","next","let","key","jsx","type","emotion","apply","children","Context","React","createContext","__EMOTION_VERSION__","useThemeUI","useContext","canUseSymbol","Symbol","for","REACT_ELEMENT","FORWARD_REF","isMergeableObject","n","$$typeof","arrayMerge","destinationArray","sourceArray","options","merge","a","b","deepmerge","all","args","BaseProvider","EmotionContext","Provider","value","context","ThemeProvider","outer","process","env","NODE_ENV","console","warn"],"mappings":"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"}